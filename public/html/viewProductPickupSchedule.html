<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <title>Schedule</title>
    <link rel="stylesheet" href="../css/viewProductPickupSchedule.css">
    <script src="../js/sideNavAdmin.js" defer></script>
</head>
<body>
    <div id="navbar" class="navbar"></div>
    <section class="home-section">
        <h1>View Schedule</h1>
        <div id="profileNav" class="profile-nav">
            <a href="viewCourtSchedule.html">Court Reservations</a>
            <a href="viewEventTournaSchedule.html">Events & Tournaments</a>
            <a href="viewTainingSchedule.html">Training Sessions</a>
            <a href="viewProductPickupSchedule.html" class="active">Product Pickup</a>
        </div>

        <div class="box">
            <div class="filter-container">
                <label for="search">Search:</label>
                <input type="text" id="search" class="search-field" placeholder="Search by name..." onkeyup="searchTable()" />
                <label for="filter">Sort by:</label>
                <select id="filter">
                    <option value="day">Day</option>
                    <option value="week">Week</option>
                    <option value="month">Month</option>
                </select>
                <button class="filter-button">
                    History <i class="fas fa-history"></i>
                </button>
                <button class="filter-button">
                    Print Schedule<i class="fas fa-file-alt"></i>
                </button>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Name <i class="fas fa-sort sort-icon" onclick="toggleSort('name')"></i></th>
                        <th>Pickup Date <i class="fas fa-sort sort-icon" onclick="toggleSort('pickup_date')"></i></th>
                        <th>Pickup Time <i class="fas fa-sort sort-icon" onclick="toggleSort('pickup_time')"></i></th>
                        <th>Products</th>
                        <th>Total Payment</th>
                        <th>Payment Status <i class="fas fa-sort sort-icon" onclick="toggleSort('status')"></i></th>
                        <th>Pickup Status <i class="fas fa-sort sort-icon" onclick="toggleSort('pickup_status')"></i></th> <!-- New Column -->
                        <th class="actions-column"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>John Doe</td>
                        <td>2024-10-05</td>
                        <td>10:00 AM</td>
                        <td>Basketball, Tennis</td>
                        <td>$50.00</td>
                        <td>
                            <span class="payment-status-text">Paid</span>
                            <select class="payment-status-dropdown">
                                <option value="Paid">Paid</option>
                                <option value="Unpaid">Unpaid</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </td>
                        <td>
                            <span class="pickup-status-text">Not Picked Up</span>
                            <select class="pickup-status-dropdown">
                                <option value="Picked Up">Picked Up</option>
                                <option value="Not Picked Up">Not Picked Up</option>
                            </select>
                        </td> <!-- New Pickup Status Cell -->
                        <td class="actions-column">
                            <i class="fas fa-edit edit-icon" onclick="editStatus(this)"></i>
                            <i class="fas fa-save save-icon" onclick="saveStatus(this)" style="display: none;"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>Jane Smith</td>
                        <td>2024-10-08</td>
                        <td>11:00 AM</td>
                        <td>Soccer</td>
                        <td>$30.00</td>
                        <td>
                            <span class="payment-status-text">Pending</span>
                            <select class="payment-status-dropdown">
                                <option value="Paid">Paid</option>
                                <option value="Unpaid">Unpaid</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </td>
                        <td>
                            <span class="pickup-status-text">Picked Up</span>
                            <select class="pickup-status-dropdown">
                                <option value="Picked Up">Picked Up</option>
                                <option value="Not Picked Up">Not Picked Up</option>
                            </select>
                        </td> <!-- New Pickup Status Cell -->
                        <td class="actions-column">
                            <i class="fas fa-edit edit-icon" onclick="editStatus(this)"></i>
                            <i class="fas fa-save save-icon" onclick="saveStatus(this)" style="display: none;"></i>
                        </td>
                    </tr>
                </tbody>
                
            </table>
            
        </div>
    </section>
    <script src="../js/viewProductPickupSchedule.js"></script>
<script>
function editStatus(editIcon) {
    const row = editIcon.closest('tr');

    // Payment Status
    const paymentStatusCell = row.querySelector('td:nth-child(6)');
    const paymentStatusText = paymentStatusCell.querySelector('.payment-status-text');
    const paymentStatusDropdown = paymentStatusCell.querySelector('.payment-status-dropdown');

    // Pickup Status
    const pickupStatusCell = row.querySelector('td:nth-child(7)'); // The 7th cell is the Pickup Status
    const pickupStatusText = pickupStatusCell.querySelector('.pickup-status-text');
    const pickupStatusDropdown = pickupStatusCell.querySelector('.pickup-status-dropdown');

    const saveIcon = row.querySelector('.save-icon');

    if (editIcon.style.display !== 'none') {
        // Switch to edit mode for Payment Status
        paymentStatusText.style.display = 'none';
        paymentStatusDropdown.style.display = 'inline';

        // Switch to edit mode for Pickup Status
        pickupStatusText.style.display = 'none';
        pickupStatusDropdown.style.display = 'inline';

        // Toggle icons
        editIcon.style.display = 'none';
        saveIcon.style.display = 'inline';
    }
}

function saveStatus(saveIcon) {
    const row = saveIcon.closest('tr');

    // Payment Status
    const paymentStatusCell = row.querySelector('td:nth-child(6)');
    const paymentStatusText = paymentStatusCell.querySelector('.payment-status-text');
    const paymentStatusDropdown = paymentStatusCell.querySelector('.payment-status-dropdown');

    // Pickup Status
    const pickupStatusCell = row.querySelector('td:nth-child(7)');
    const pickupStatusText = pickupStatusCell.querySelector('.pickup-status-text');
    const pickupStatusDropdown = pickupStatusCell.querySelector('.pickup-status-dropdown');

    const editIcon = row.querySelector('.edit-icon');

    // Save the selected values
    const selectedPaymentStatus = paymentStatusDropdown.value;
    const selectedPickupStatus = pickupStatusDropdown.value;

    // Update text with selected values
    paymentStatusText.textContent = selectedPaymentStatus;
    pickupStatusText.textContent = selectedPickupStatus;

    // Switch back to display mode
    paymentStatusText.style.display = 'inline';
    paymentStatusDropdown.style.display = 'none';

    pickupStatusText.style.display = 'inline';
    pickupStatusDropdown.style.display = 'none';

    // Toggle icons
    saveIcon.style.display = 'none';
    editIcon.style.display = 'inline';

    // Here you can add functionality to save the updated statuses to a database or backend
}

</script>
    
</body>
</html>

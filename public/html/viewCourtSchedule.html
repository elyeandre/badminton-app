<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <title>Schedule</title>
    <link rel="stylesheet" href="../css/viewCourtSchedule.css">
    <script src="../js/sideNavAdmin.js" defer></script>
</head>
<body>
    <div id="navbar" class="navbar"></div>
    <section class="home-section">
        <h1>View Schedule</h1>
        <div id="profileNav" class="profile-nav">
            <a href="viewCourtSchedule.html" class="active">Court Reservations</a>
            <a href="viewEventTournaSchedule.html">Events & Tournaments</a>
            <a href="viewTainingSchedule.html">Training Sessions</a>
            <a href="viewProductPickupSchedule.html">Product Pickup</a>
        </div>

        <div class="box">
            <div class="filter-container">
                <label for="search">Search:</label>
                <input type="text" id="search" class="search-field" placeholder="Search by name..." onkeyup="searchTable()" />
                <label for="filter">Sort by:</label>
                <select id="filter">
                    <option value="day">Day</option>
                    <option value="week">Week</option>
                    <option value="month">Month</option>
                </select>
                <button class="filter-button">
                    History <i class="fas fa-history"></i>
                </button>
                <button class="filter-button">
                    Print Schedule<i class="fas fa-file-alt"></i>
                </button>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>
                            Name
                            <i class="fas fa-sort sort-icon" onclick="toggleSort('name')"></i>
                        </th>
                        <th>
                            Date
                            <i class="fas fa-sort sort-icon" onclick="toggleSort('date')"></i>
                        </th>
                        <th>
                            From
                            <i class="fas fa-sort sort-icon" onclick="toggleSort('from')"></i>
                        </th>
                        <th>To</th>
                        <th>Court Reserved</th>
                        <th>
                            Status
                            <i class="fas fa-sort sort-icon" onclick="toggleSort('status')"></i>
                        </th>
                        <th>Total Bill</th>
                        <th>Payment Status</th>
                        <th class="actions-column"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Charlie Brown</td>
                        <td>2024-10-05</td>
                        <td>10:00 AM</td>
                        <td>12:00 PM</td>
                        <td>Court 1</td>
                        <td>Confirmed</td>
                        <td>$100.00</td>
                        <td>
                            <span class="payment-status-text">Paid</span>
                            <select class="payment-status-dropdown">
                                <option value="Paid">Paid</option>
                                <option value="Unpaid">Unpaid</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </td>
                        <td class="actions-column">
                            <i class="fas fa-edit edit-icon" onclick="editReservation(this)"></i>
                    </tr>
                    <tr>
                        <td>Lucy Van Pelt</td>
                        <td>2024-10-08</td>
                        <td>11:00 AM</td>
                        <td>02:00 PM</td>
                        <td>Court 2</td>
                        <td>Pending</td>
                        <td>$150.00</td>
                        <td>
                            <span class="payment-status-text">Unpaid</span>
                            <select class="payment-status-dropdown">
                                <option value="Paid">Paid</option>
                                <option value="Unpaid">Unpaid</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </td>
                        <td class="actions-column">
                            <i class="fas fa-edit edit-icon" onclick="editReservation(this)"></i>
                        </td>
                    </tr>
                    <tr>
                        <td>KC Cruz</td>
                        <td>2024-11-08</td>
                        <td>01:30 PM</td>
                        <td>03:00 PM</td>
                        <td>Court 3</td>
                        <td>Cancelled</td>
                        <td>$0.00</td>
                        <td>
                            <span class="payment-status-text">Cancelled</span>
                            <select class="payment-status-dropdown">
                                <option value="Paid">Paid</option>
                                <option value="Unpaid">Unpaid</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </td>
                        <td class="actions-column">
                            <i class="fas fa-edit edit-icon" onclick="editReservation(this)"></i>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
    <script src="../js/viewCourtSchedule.js"></script>
    <script>
        function searchTable() {
            const input = document.getElementById('search').value.toLowerCase();
            const table = document.querySelector('table tbody');
            const rows = table.getElementsByTagName('tr');

            for (let i = 0; i < rows.length; i++) {
                const cells = rows[i].getElementsByTagName('td');
                let rowVisible = false;

                for (let j = 0; j < cells.length; j++) {
                    const cellValue = cells[j].textContent.toLowerCase();
                    if (cellValue.includes(input)) {
                        rowVisible = true;
                        break;
                    }
                }

                rows[i].style.display = rowVisible ? '' : 'none';
            }
        }

        function editReservation(editIcon) {
    const row = editIcon.closest('tr');
    const paymentStatusCell = row.querySelector('td:nth-child(8)'); // The 8th cell is the Payment Status

    const paymentStatusText = paymentStatusCell.querySelector('.payment-status-text');
    const paymentStatusDropdown = paymentStatusCell.querySelector('.payment-status-dropdown');

    if (editIcon.classList.contains('fa-edit')) {
        // Switch from edit mode to save mode
        paymentStatusText.style.display = 'none'; // Hide text
        paymentStatusDropdown.style.display = 'inline'; // Show dropdown
        editIcon.classList.remove('fa-edit');
        editIcon.classList.add('fa-save');
    } else if (editIcon.classList.contains('fa-save')) {
        // Save the changes
        const selectedValue = paymentStatusDropdown.value;
        paymentStatusText.textContent = selectedValue; // Update text to selected value
        paymentStatusText.style.display = 'inline'; // Show updated text
        paymentStatusDropdown.style.display = 'none'; // Hide dropdown

        // Switch back to edit mode
        editIcon.classList.remove('fa-save');
        editIcon.classList.add('fa-edit');
        
        // Here you can add additional functionality, e.g., saving the updated status to a database
    }
}

    </script>
</body>
</html>
